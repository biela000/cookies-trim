extends ../templates/layout

append styles
    link(rel='stylesheet', href='/stylesheets/music.css')

block aside-menu-options
    each option in options
        li.menu-item
            a.menu-link(href= option.url) #{option.name}

block aside-submenu-options
    each option in subOptions
        li.menu-item
            - route = option.url + (favorite ? '/favorite' : '');
            a.menu-link(href= route) #{option.name}

block main-section
    section.main-section
        header.main-section-header
            h1.main-section-title= sectionTitle
            .main-section-options
                .main-section-option-set.display-options
                    button.main-section-option [grid_
                    button.main-section-option [list_
                .main-section-option-set.sort-options
                    select.sort-by-select(name="sort-by")
                        option(value="plays") [plays_
                        option(value="title") [title_
                        option(value="artist") [artist_
                        option(value="album") [album_
                        option(value="date") [date_
                    select.sort-order-select(name="sort-order")
                        option(value="descending") [descending_
                        option(value="ascending") [ascending_
        main.main-section-content
            each item in items
                .main-section-item(
                    data-db-id=item._id,
                    data-is-favorite=item.favorite.toString()
                )
                    -
                        let imgSrc = '/media/images/unknown.png';
                        if (item.cover && item.cover.length > 0 && item.cover[0].data) {
                            imgSrc = 'data:image/jpeg;base64,' + item.cover[0].data.toString('base64');
                        }
                    img.main-section-item-image(
                        src=imgSrc,
                        alt=item.title
                    )
                    h2.main-section-item-heading= item.title
                    p.main-section-item-album
                        em.main-section-item-album-text= item.album
                    p.main-section-item-description= item.artist
                    img.main-section-item-favorite-icon(src="/media/images/heart-solid.svg", alt="favorite")

append scripts
    script(src="/javascript/music.js", type='module')
